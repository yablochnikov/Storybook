import { Meta, Story, Canvas } from "@storybook/addon-docs/blocks";
import { IconButton } from "@mui/material";
import { EmailOutlined, SearchOutlined, Person2Outlined, SendOutlined } from "@mui/icons-material";
import { TextInput } from "./TextInput.tsx";

<Meta
  title={"INPUTS/TextInput"}
  component={TextInput}
  argTypes={{
    variant: {
      description: "Set style of TextInput",
      table: {
        defaultValue: {
          summary: "outlined",
        },
      },
      control: {
        type: "inline-radio"
      },
    },
    size: {
      description: "Set size of TextInput",
      table: {
        defaultValue: {
          summary: "medium",
        },
      },
      control: {
        type: "inline-radio"
      },
    },
    type: {
      description: "Set the type of input field.",
      table: {
        defaultValue: {
          summary: "text"
        },
      },
      control: {
        type: "inline-radio"
      },
    },
    margin: {
      description: "Set vertical margin of TextInput",
      table: {
        defaultValue: {
          summary: "none"
        }
      },
      control: {
        type: "inline-radio"
      },
    },
    label: {
      description: "Set the label of TextInput. Disabled, when TextInput type equals to `date` or `time`",
    },
    placeholder: {
      description: "Set the placeholder of TextInput",
    },
    helperText: {
      description: "Set the helperText of TextInput",
    },
    error: {
      description: "Toggles the error state of TextInput",
    },
    disabled: {
      description: "Toggles the disabled state of TextInput",
    },
    autoFocus: {
      description: "Toggles the autoFocus state of TextInput",
    },
    required: {
      description: "Toggles the required state of TextInput",
    },
    fullWidth: {
      description: "Toggles TextInput width take up the full width of its container",
    },
    multiline: {
      description: "Toggles the height of input field dynamically matches its content",
    },
    rows: {
      description: "Set the height of input field",
    },
    minRows: {
      description: "Bound min height of input field",
    },
    maxRows: {
      description: "Bound max height of input field",
    },
    color: {
      description: "Set highlight color of TextInput when focused",
      table: {
        defaultValue: {
          summary: "primary",
        },
      },
      control: {
        type: "inline-radio"
      }
    },
    startAdornment: {
      description: "Set left side adornment of TextInput. Accept any ReactNode",
      options: ["none", "Email icon", "User icon"],
      control: { type: 'inline-radio'},
      mapping: {
        "none": undefined,
        "Email icon": <EmailOutlined />,
        "User icon": <Person2Outlined />,
      },
    },
    endAdornment: {
      description: "Set right side adornment of TextInput. Accept any ReactNode",
      options: ["none", "Send button", "Search button"],
      control: { type: 'inline-radio'},
      mapping: {
        "none": undefined,
        "Send button": <IconButton><SendOutlined /></IconButton>,
        "Search button": <IconButton><SearchOutlined /></IconButton>,
      },
    },
    sx: {
      description: "Set custom mui style overrides of TextInput",
      control: { type: 'inline-radio'},
      options: ["none", "Cornered", "Dashed"],
      mapping: {
        "none": undefined,
        "Cornered": {
          '& label.Mui-focused': {
            color: 'green',
            border: "2px solid green",
            borderRadius: 1,
            marginLeft: "-5px",
            marginTop: "-2px",
            paddingX: "5px"
          },
          '& .MuiOutlinedInput-root': {
            '& fieldset': {
              borderRadius: 'unset',
            },
          },
        },
        "Dashed": {
          '& label.Mui-focused': {
            fontStyle: 'italic',
            marginLeft: '-5px',
            border: '2px dashed #0989e3',
            borderWidth: '2px',
            borderRight: 'none',
            borderLeft: 'none',
            paddingX: '5px',
            marginTop: '-4px',
          },
          '& .MuiOutlinedInput-root': {
            '& fieldset': {
              borderStyle: 'dashed',
              borderWidth: '2px',
              borderRadius: 'unset',
              borderLeft: 'none',
              borderRight: 'none',
            },
          },
        }
      },
    },
  }}
  parameters={{
    controls: {
      expanded: true,
      exclude: ["id", "name", "value", "onChange", "inputRef"]
    }
  }}
/>

export const Template = args => <TextInput {...args} />

## TextInput

#### Default

<Canvas>
  <Story name="Default">
    {Template.bind({})}
  </Story>
</Canvas>

#### Basic

<Canvas>
  <Story
    name="Basic"
    args={{
      variant: "standard",
      size: "small",
      color: "success",
      margin: "dense",
      label: "Label",
      placeholder: "Placeholder",
      helperText: "Helper text"
    }}
    parameters={{
      controls: {
        include: ["variant", "size", "color", "margin", "label", "placeholder", "helperText"]
      }
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

#### Form props

<Canvas>
  <Story
    name="Form props"
    args={{
      type: "password",
      autoFocus: false,
      required: true,
      error: true,
      disabled: false,
    }}
    parameters={{
      controls: {
        include: ["type", "required", "error", "disabled", "autoFocus"]
      }
    }}
    decorators={[
      (_, context) => (
        <TextInput
          {...context.args}
          label={context.args.type.split('').map((l, i) => i === 0 ? l.toUpperCase() : l).join('')}
          helperText={context.args.error ? "Error message" : undefined}
        />
      )
    ]}
  >
    {Template.bind({})}
  </Story>
</Canvas>

#### Multiline

<Canvas>
  <Story
    name="Multiline"
    args={{
      variant: "filled",
      placeholder: "Message",
      fullWidth: true,
      multiline: true,
      rows: 3,
    }}
    parameters={{
      controls: {
        include: ["multiline", "rows", "minRows", "maxRows", "fullWidth"],
      }
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

#### Adornments

<Canvas>
  <Story
    name="Adornments"
    args={{
      variant: "standard",
      startAdornment: "Email icon",
      endAdornment: "none",
    }}
    parameters={{
      controls: {
        include: ["startAdornment", "endAdornment"],
      }
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

#### Custom styles

<Canvas>
  <Story
    name="Custom styles"
    args={{
      label: "Custom",
      sx: "Dashed"
    }}
    parameters={{
      controls: {
        include: ["sx"],
      }
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Props

| Argument         | Type                                                                    | Description                                                                          |
|------------------|-------------------------------------------------------------------------|--------------------------------------------------------------------------------------|
| `variant`        | "outlined" (default), "filled", "standard"                              | Set style of TextInput                                                               |
| `size`           | "medium" (default), "small"                                             | Set size of TextInput                                                                |
| `color`          | "primary" (default), "secondary", "info", "error", "success", "warning" | Set highlight color of TextInput when focused                                        |
| `type`           | "text" (default), "number", "password", "search", "date", "time"        | Set the type of input field                                                          |
| `margin`         | "none" (default), "normal", "dense"                                     | Set vertical margin of TextInput                                                     |
| `label`          | `string`                                                                | Set the label of TextInput. Disabled, when TextInput type equals to "date" or "time" |
| `placeholder`    | `string`                                                                | Set the placeholder of TextInput                                                     |
| `helperText`     | `string`                                                                | Set the helperText of TextInput                                                      |
| `error`          | `boolean`                                                               | Toggles the error state of TextInput                                                 |
| `disabled`       | `boolean`                                                               | Toggles the disabled state of TextInput                                              |
| `autoFocus`      | `boolean`                                                               | Toggles the focused state of TextInput                                               |
| `required`       | `boolean`                                                               | Toggles the required mark of TextInput                                               |
| `fullWidth`      | `boolean`                                                               | Toggles TextInput width take up the full width of its container                      |
| `multiline`      | `boolean`                                                               | Toggles the height of input field dynamically matches its content                    |
| `rows`           | `number`                                                                | Set the height of input field                                                        |
| `minRows`        | `number`                                                                | Bound min height of input field                                                      |
| `maxRows`        | `number`                                                                | Bound max height of input field                                                      |
| `startAdornment` | `ReactNode`                                                             | Set left side adornment of TextInput. Accept any ReactNode                           |
| `endAdornment`   | `ReactNode`                                                             | Set right side adornment of TextInput. Accept any ReactNode                          |
| `sx`             | `SxProps`                                                               | Set custom mui style overrides of TextInput                                          |
| `id`             | `string`                                                                | Set id of input field                                                                |
| `name`           | `string`                                                                | Set name of input field                                                              |
| `value`          | `string`                                                                | Set value of input field                                                             |
| `onChange`       | `(event: ChangeEvent<HTMLInputElement>) => void `                       | Set change event handler of input field                                              |
| `inputRef`       | `Ref<HTMLInputElement> `                                                | Set ref of input field                                                               |
